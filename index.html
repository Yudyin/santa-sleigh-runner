<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Santa Sleigh Runner ðŸŽ„</title>

<style>
body {
  margin: 0;
  background: radial-gradient(circle at top, #0b2a44, #041726);
  color: white;
  font-family: Arial, sans-serif;
  text-align: center;
}

canvas {
  display: block;
  margin: 20px auto;
  background: linear-gradient(#1e3c72, #2a5298);
  border-radius: 12px;
}
</style>
</head>

<body>

<h1>ðŸŽ… Santa Sleigh Runner ðŸŽ„</h1>
<p>Press SPACE or CLICK to jump â€¢ Sound starts after first action</p>

<canvas id="game" width="800" height="260"></canvas>

<!-- ðŸ”Š REAL AUDIO FILES -->
<audio id="bgMusic" loop>
  <source src="https://cdn.pixabay.com/audio/2022/12/05/audio_8a6b2a5b30.mp3" type="audio/mpeg">
</audio>

<audio id="jumpSound">
  <source src="https://cdn.pixabay.com/audio/2022/03/15/audio_66fcb2a3b3.mp3" type="audio/mpeg">
</audio>

<audio id="crashSound">
  <source src="https://cdn.pixabay.com/audio/2022/03/10/audio_91b7d5f4f6.mp3" type="audio/mpeg">
</audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const bgMusic = document.getElementById("bgMusic");
const jumpSound = document.getElementById("jumpSound");
const crashSound = document.getElementById("crashSound");

let started = false;
let gameOver = false;
let score = 0;
let speed = 5;
const gravity = 0.6;

const santa = {
  x: 60,
  y: 180,
  w: 50,
  h: 30,
  vy: 0,
  grounded: true
};

let obstacles = [];
let timer = 0;

function startSound() {
  if (!started) {
    bgMusic.volume = 0.3;
    bgMusic.play();
    started = true;
  }
}

function jump() {
  startSound();
  if (santa.grounded && !gameOver) {
    santa.vy = -13;
    santa.grounded = false;
    jumpSound.currentTime = 0;
    jumpSound.play();
  }
  if (gameOver) location.reload();
}

document.addEventListener("keydown", e => {
  if (e.code === "Space") jump();
});
canvas.addEventListener("click", jump);

function spawnObstacle() {
  obstacles.push({ x: canvas.width, y: 180, w: 30, h: 40 });
}

function update() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // Snow
  ctx.fillStyle = "rgba(255,255,255,0.6)";
  for (let i = 0; i < 25; i++) {
    ctx.fillRect(Math.random()*800, Math.random()*260, 2, 2);
  }

  // Ground
  ctx.strokeStyle = "rgba(255,255,255,0.4)";
  ctx.beginPath();
  ctx.moveTo(0, 210);
  ctx.lineTo(800, 210);
  ctx.stroke();

  // Santa physics
  santa.vy += gravity;
  santa.y += santa.vy;
  if (santa.y >= 180) {
    santa.y = 180;
    santa.vy = 0;
    santa.grounded = true;
  }

  // Santa
  ctx.fillStyle = "red";
  ctx.fillRect(santa.x, santa.y, santa.w, santa.h);
  ctx.fillStyle = "gold";
  ctx.fillRect(santa.x + 10, santa.y + 10, 30, 6);

  // Obstacles
  timer++;
  if (timer > 90 && !gameOver) {
    spawnObstacle();
    timer = 0;
  }

  obstacles.forEach((o, i) => {
    o.x -= speed;
    ctx.fillStyle = "green";
    ctx.fillRect(o.x, o.y, o.w, o.h);

    if (
      santa.x < o.x + o.w &&
      santa.x + santa.w > o.x &&
      santa.y < o.y + o.h &&
      santa.y + santa.h > o.y
    ) {
      gameOver = true;
      bgMusic.pause();
      crashSound.play();
    }

    if (o.x + o.w < 0) obstacles.splice(i, 1);
  });

  if (!gameOver) score++;
  speed = 5 + score / 500;

  ctx.fillStyle = "white";
  ctx.fillText("Score: " + score, 10, 20);

  if (gameOver) {
    ctx.fillStyle = "rgba(0,0,0,0.6)";
    ctx.fillRect(0,0,800,260);
    ctx.font = "28px Arial";
    ctx.fillText("ðŸŽ„ Merry Christmas! ðŸŽ…", 240, 120);
    ctx.font = "16px Arial";
    ctx.fillText("Press SPACE or CLICK to play again â„ï¸", 230, 150);
    return;
  }

  requestAnimationFrame(update);
}

update();
</script>

</body>
</html>
